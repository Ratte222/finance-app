"use strict";(self.webpackChunka_finance_app=self.webpackChunka_finance_app||[]).push([[960],{1960:(I,l,n)=>{n.r(l),n.d(l,{DashboardModule:()=>x});var d=n(6895),c=n(4006),t=n(4650),h=n(529),u=n(2340);let f=(()=>{class e{constructor(a){this.http=a}getStatisticByCategory(a,s){let r=new h.LE;return r=r.set("startDateTime",a),r=r.set("endDateTime",s),this.http.get(`${u.N.apiBaseUrl}Statistics/getStatisticByCategory`,{params:r})}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(h.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n(4859),p=n(9549),v=n(4144),m=n(3546);function D(e,i){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"label",6),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("textContent",a.categoryName+": "+a.amount)}}function S(e,i){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"label",6),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("textContent",a.categoryName+": "+a.amount)}}let T=(()=>{class e{constructor(a){this.service=a,this.matRowDef=[],this.incomeStatistics=[],this.expenseStatistics=[],this.totalIncomes=0,this.totalExpenses=0,this.ctl={startDateTime:new c.NI(""),endDateTime:new c.NI("")};const s=new Date;this.ctl.startDateTime.setValue(s.toISOString().substring(0,8)+"01"),this.ctl.endDateTime.setValue(s.toISOString().substring(0,10))}ngOnInit(){this.getStatistic()}getStatistic(){this.ctl.startDateTime.value&&this.ctl.endDateTime.value&&this.service.getStatisticByCategory(this.ctl.startDateTime.value,this.ctl.endDateTime.value).subscribe(a=>{let s=a.filter(o=>0!==o.amount);this.incomeStatistics=s.filter(o=>o.isIncome),this.totalIncomes=this.incomeStatistics.map(o=>o.amount).reduce((o,b)=>o+b),this.expenseStatistics=s.filter(o=>!o.isIncome);let r=0;this.expenseStatistics.forEach(o=>{r+=o.amount}),this.totalExpenses=r,this.matRowDef=s.map(o=>o.categoryName)})}doSearch(){this.getStatistic()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dashboard"]],decls:26,vars:6,consts:[[1,"nav-content"],["appearance","standard",2,"min-width","240px","margin-right","20px"],["type","date","matInput","","placeholder","",3,"formControl"],["mat-raised-button","","color","primary",1,"action",3,"click"],[4,"ngFor","ngForOf"],[2,"font-size","20px",3,"textContent"],[3,"textContent"]],template:function(a,s){1&a&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title"),t._uU(2," Filters "),t.qZA(),t.TgZ(3,"mat-card-content")(4,"mat-form-field",1)(5,"mat-label"),t._uU(6,"Start date time"),t.qZA(),t._UZ(7,"input",2),t.qZA(),t.TgZ(8,"mat-form-field",1)(9,"mat-label"),t._uU(10,"End date time"),t.qZA(),t._UZ(11,"input",2),t.qZA(),t.TgZ(12,"button",3),t.NdJ("click",function(){return s.doSearch()}),t._uU(13," Search "),t.qZA()()(),t.TgZ(14,"mat-card"),t._UZ(15,"mat-card-title"),t.TgZ(16,"mat-card-content")(17,"h1"),t._uU(18,"Incomes"),t.qZA(),t.YNc(19,D,2,1,"div",4),t._UZ(20,"label",5)(21,"p"),t.TgZ(22,"h1"),t._uU(23,"Expenses"),t.qZA(),t.YNc(24,S,2,1,"div",4),t._UZ(25,"label",5),t.qZA()()),2&a&&(t.xp6(7),t.Q6J("formControl",s.ctl.startDateTime),t.xp6(4),t.Q6J("formControl",s.ctl.endDateTime),t.xp6(8),t.Q6J("ngForOf",s.incomeStatistics),t.xp6(1),t.Q6J("textContent","Total incomes: "+s.totalIncomes),t.xp6(4),t.Q6J("ngForOf",s.expenseStatistics),t.xp6(1),t.Q6J("textContent","Total expenses: "+s.totalExpenses))},dependencies:[d.sg,g.lW,p.KE,p.hX,v.Nt,m.a8,m.dn,m.n5,c.Fj,c.JJ,c.oH],styles:[".mat-form-field[_ngcontent-%COMP%]{margin:10px}"]}),e})();var Z=n(1951),C=n(8897);const y=[{path:"",component:T}];let x=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,C.m,Z.Bz.forChild(y)]}),e})()}}]);