"use strict";(self.webpackChunka_finance_app=self.webpackChunka_finance_app||[]).push([[960],{1960:(I,c,s)=>{s.r(c),s.d(c,{DashboardModule:()=>J});var p=s(6895),m=s(4006),h=s(5475),t=s(4650),u=s(529),f=s(2340);let g=(()=>{class e{constructor(a){this.http=a}getStatisticByCategory(a,o,r){let n=new u.LE;return n=n.set("startDateTime",a),n=n.set("endDateTime",o),r&&(n=n.set("type",r)),this.http.get(`${f.N.apiBaseUrl}Statistics/getStatisticByCategory`,{params:n})}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(u.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=s(4859),d=s(9549),T=s(4144),l=s(3546),y=s(4385),Z=s(3238);function D(e,i){if(1&e&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.Q6J("value",a.value),t.xp6(1),t.hij(" ",a.name," ")}}function C(e,i){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"label",9),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("textContent",a.categoryName+": "+a.amount)}}function S(e,i){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"label",9),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("textContent",a.categoryName+": "+a.amount)}}let x=(()=>{class e{constructor(a){this.service=a,this.matRowDef=[],this.incomeStatistics=[],this.expenseStatistics=[],this.totalIncomes=0,this.totalExpenses=0,this.ctl={startDateTime:new m.NI(""),endDateTime:new m.NI(""),amountOperationType:new m.NI("")},this.amountOperationTypes=h.L;const o=new Date;this.ctl.startDateTime.setValue(o.toISOString().substring(0,8)+"01"),this.ctl.endDateTime.setValue(o.toISOString().substring(0,10)),this.ctl.amountOperationType.setValue(this.amountOperationTypes[1].value)}ngOnInit(){this.getStatistic()}getStatistic(){this.ctl.startDateTime.value&&this.ctl.endDateTime.value&&this.service.getStatisticByCategory(this.ctl.startDateTime.value,this.ctl.endDateTime.value,this.ctl.amountOperationType.value).subscribe(a=>{let o=a.filter(n=>0!==n.amount);this.incomeStatistics=o.filter(n=>n.isIncome),this.totalIncomes=this.incomeStatistics.map(n=>n.amount).reduce((n,U)=>n+U),this.expenseStatistics=o.filter(n=>!n.isIncome);let r=0;this.expenseStatistics.forEach(n=>{r+=n.amount}),this.totalExpenses=r,this.matRowDef=o.map(n=>n.categoryName)})}doSearch(){this.getStatistic()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dashboard"]],decls:31,vars:8,consts:[[1,"nav-content"],["appearance","standard",2,"min-width","240px","margin-right","20px"],["type","date","matInput","","placeholder","",3,"formControl"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"action",3,"click"],[4,"ngFor","ngForOf"],[2,"font-size","20px",3,"textContent"],[3,"value"],[3,"textContent"]],template:function(a,o){1&a&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title"),t._uU(2," Filters "),t.qZA(),t.TgZ(3,"mat-card-content")(4,"mat-form-field",1)(5,"mat-label"),t._uU(6,"Start date time"),t.qZA(),t._UZ(7,"input",2),t.qZA(),t.TgZ(8,"mat-form-field",1)(9,"mat-label"),t._uU(10,"End date time"),t.qZA(),t._UZ(11,"input",2),t.qZA(),t.TgZ(12,"mat-form-field",1)(13,"mat-label"),t._uU(14,"Amount operation type"),t.qZA(),t.TgZ(15,"mat-select",3),t.NdJ("valueChange",function(n){return o.ctl.amountOperationType.setValue(n)}),t.YNc(16,D,2,2,"mat-option",4),t.qZA()(),t.TgZ(17,"button",5),t.NdJ("click",function(){return o.doSearch()}),t._uU(18," Search "),t.qZA()()(),t.TgZ(19,"mat-card"),t._UZ(20,"mat-card-title"),t.TgZ(21,"mat-card-content")(22,"h1"),t._uU(23,"Incomes"),t.qZA(),t.YNc(24,C,2,1,"div",6),t._UZ(25,"label",7)(26,"p"),t.TgZ(27,"h1"),t._uU(28,"Expenses"),t.qZA(),t.YNc(29,S,2,1,"div",6),t._UZ(30,"label",7),t.qZA()()),2&a&&(t.xp6(7),t.Q6J("formControl",o.ctl.startDateTime),t.xp6(4),t.Q6J("formControl",o.ctl.endDateTime),t.xp6(4),t.Q6J("value",o.ctl.amountOperationType.value),t.xp6(1),t.Q6J("ngForOf",o.amountOperationTypes),t.xp6(8),t.Q6J("ngForOf",o.incomeStatistics),t.xp6(1),t.Q6J("textContent","Total incomes: "+o.totalIncomes),t.xp6(4),t.Q6J("ngForOf",o.expenseStatistics),t.xp6(1),t.Q6J("textContent","Total expenses: "+o.totalExpenses))},dependencies:[p.sg,v.lW,d.KE,d.hX,T.Nt,l.a8,l.dn,l.n5,y.gD,Z.ey,m.Fj,m.JJ,m.oH],styles:[".mat-form-field[_ngcontent-%COMP%]{margin:10px}"]}),e})();var b=s(1951),A=s(8897);const O=[{path:"",component:x}];let J=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,A.m,b.Bz.forChild(O)]}),e})()}}]);